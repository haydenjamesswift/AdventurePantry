<!-- Imports -->
@using AP.CoreBusiness
@using AP.UseCases.Products

<!-- Injections -->
@inject IAddProductUseCase AddProductUseCase

<!-- Page Definitions -->
@page "/add-product"

<!-- HTML -->
<div class="inner-container">
    <div class="title-container">
        <h1>Add A New Product</h1>
    </div>
    <EditForm Model="product" FormName="formProduct" OnValidSubmit="Save">
        <div class='form-group'>
            <label for="name">Product Name</label>
            <InputText 
                id="name"
                @bind-Value="product.ProductName"
                class="form-control">
            </InputText>
        </div>
        <div class='form-group'>
            <label for="name">Quantity</label>
            <InputNumber 
                id="name"
                @bind-Value="product.Quantity"
                class="form-control">
            </InputNumber>
        </div>
        <div class='form-item'>
            <label for="name">Price</label>
            <InputNumber 
                id="name"
                @bind-Value="product.Price"
                class="form-control">
            </InputNumber>
        </div>
        <br/>
        <button type='submit'>Add Item</button>
    </EditForm>
</div> 

@code {
    [SupplyParameterFromForm]
    private Product product { get; set; } = new Product();

    public async Task Save() {
        if (product.ProductName is null || product.Quantity == 0 || product.Price == 0) {
            return;
        }

        await AddProductUseCase.ExecuteAsync(product); 
    }
}
